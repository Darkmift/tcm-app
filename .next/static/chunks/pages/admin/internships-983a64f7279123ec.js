(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[959],{6242:function(e,n,t){"use strict";t.d(n,{Z:function(){return y}});var r=t(7462),i=t(3366),a=t(7294),o=t(6010),s=t(4780),u=t(948),c=t(1657),l=t(629),p=t(1588),d=t(4867);function f(e){return(0,d.Z)("MuiCard",e)}(0,p.Z)("MuiCard",["root"]);var m=t(5893);let h=["className","raised"],g=e=>{let{classes:n}=e;return(0,s.Z)({root:["root"]},f,n)},v=(0,u.ZP)(l.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,n)=>n.root})(()=>({overflow:"hidden"})),x=a.forwardRef(function(e,n){let t=(0,c.Z)({props:e,name:"MuiCard"}),{className:a,raised:s=!1}=t,u=(0,i.Z)(t,h),l=(0,r.Z)({},t,{raised:s}),p=g(l);return(0,m.jsx)(v,(0,r.Z)({className:(0,o.Z)(p.root,a),elevation:s?8:void 0,ref:n,ownerState:l},u))});var y=x},2593:function(e,n,t){"use strict";var r=t(7191),i=t(3321),a=t(5861);t(7294);var o=t(1163),s=t(1023),u=t(5893);n.Z=function(e){(0,r.Z)(e);var n=(0,o.useRouter)();return(0,u.jsxs)(i.Z,{onClick:function(){return n.back()},sx:{display:"flex",maxWidth:"175px",alignItems:"center"},variant:"outlined",children:[(0,u.jsx)(s.Z,{}),(0,u.jsx)(a.Z,{sx:{mt:"3px",mx:2},children:"Go Back"})]})}},4148:function(e,n,t){"use strict";var r=t(4054),i=t(6886),a=t(135),o=t(2580),s=t(7294),u=t(5675),c=t.n(u),l=t(8677),p=t(5893);n.Z=function(e){var n=e.onChange,t=e.item,u=e.touched,d=e.errors,f=e.originalFileSrc,m=l.LT+"/projects/default-project-img.jpg",h=(0,s.useState)(f),g=h[0],v=h[1];(0,s.useEffect)(function(){v(f)},[f]);var x=function(e){var r=e.target.files;if(r&&r.length>0){var i=r[0];v(URL.createObjectURL(i)),n({currentTarget:{name:t,files:[i],value:i}})}};return(0,p.jsx)(o.gN,{name:t,children:function(e){var n=e.field;return(0,p.jsx)(r.Z,{fullWidth:!0,margin:"normal",error:u[t]&&!!d[t],children:(0,p.jsxs)(i.ZP,{container:!0,spacing:2,children:[(0,p.jsx)(i.ZP,{item:!0,xs:2,children:(0,p.jsx)(c(),{width:175,height:175,src:g||m,alt:t})}),(0,p.jsx)(i.ZP,{item:!0,xs:10,children:(0,p.jsx)(a.Z,{sx:{py:1},fullWidth:!0,variant:"standard",id:t,name:n.name,onChange:x,label:n.name.toUpperCase(),type:"file",InputLabelProps:{shrink:"image"===t},error:u[t]&&!!d[t],helperText:u[t]&&d[t]})})]})})}})}},8025:function(e,n,t){"use strict";var r=t(9499),i=t(4054),a=t(135),o=t(2580);t(7294);var s=t(5893);function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}n.Z=function(e){var n=e.disabled,t=e.isMultiLine,c=e.rowNums,l=e.item,p=e.touched,d=e.errors;return(0,s.jsx)(o.gN,{name:l,children:function(e){var o=e.field;return(0,s.jsx)(i.Z,{fullWidth:!0,margin:"normal",error:p[l]&&!!d[l],children:(0,s.jsx)(a.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({disabled:n,sx:{py:1},fullWidth:!0,variant:"description"===o.name?"outlined":"standard",id:l,name:o.name,value:o.value,onChange:o.onChange,label:o.name.toUpperCase(),type:"text",error:p[l]&&!!d[l],helperText:p[l]&&d[l]},t?{multiline:!0,rows:c}:{}),l)})}},l)}},113:function(e,n,t){"use strict";var r=t(4054),i=t(2580);t(7294);var a=t(2266),o=t(5893);n.Z=function(e){var n=e.optionLabelKey,t=e.optionIdKey,s=e.isMultiLine,u=e.options,c=e.item,l=e.touched,p=e.errors;return(0,o.jsx)(i.gN,{name:c,children:function(e){var i=e.field;return(0,o.jsx)(r.Z,{fullWidth:!0,margin:"normal",error:l[c]&&!!p[c],children:(0,o.jsx)(a.Z,{multiple:!!s,value:i.value,handleChange:i.onChange,name:i.name,options:u,optionLabelKey:n,optionIdKey:t,error:l[c]&&!!p[c],helperText:l[c]&&p[c]})})}},c)}},190:function(e,n,t){"use strict";t(7294);var r=t(8703),i=t(1737),a=t(5893);n.Z=function(e){var n=e.severity,t=e.open,o=e.message,s=e.handleClose;return(0,a.jsx)(r.Z,{open:t,autoHideDuration:4e3,onClose:s,children:(0,a.jsx)(i.Z,{onClose:s,severity:n,sx:{width:"100%",fontSize:"25px",fontWeight:"900"},children:o})})}},2266:function(e,n,t){"use strict";t(7294);var r=t(2734),i=t(7058),a=t(3841),o=t(3599),s=t(4054),u=t(315),c=t(7918),l=t(3946),p=t(6815),d=t(3343),f=t(5893),m={PaperProps:{style:{maxHeight:224,width:250}}};n.Z=function(e){var n=e.value,t=e.handleChange,h=e.multiple,g=e.name,v=e.options,x=e.optionLabelKey,y=e.optionIdKey,j=e.error,b=e.helperText,Z=(0,r.Z)(),O=function(e){e.target.value||(e.target.value=h?[]:null),e.target.name=g,t(e)};return!!v&&(0,f.jsxs)(s.Z,{sx:{width:"100%"},error:j,children:[(0,f.jsx)(a.Z,{id:"demo-multiple-chip-label",children:g}),(0,f.jsx)(u.Z,{name:g,sx:{minHeight:"70px"},labelId:"demo-multiple-chip-label",id:"demo-multiple-chip",multiple:h,variant:"standard",value:n,onChange:O,input:(0,f.jsx)(i.Z,{id:"select-multiple-chip",label:"Chip"}),renderValue:function(e){if(h)return e.map(function(e,n){var t=v.find(function(n){return n[y]===e[y]});return(0,f.jsx)(c.Z,{label:t[x]},n)});if(null!=e&&null!==(n=e[0])&&void 0!==n&&n[y])return(0,f.jsx)(c.Z,{label:e[0][x],variant:"outlined"});var n,t=v.find(function(n){return n[y]===e[y]});return(0,f.jsx)(c.Z,{label:null==t?void 0:t[x],variant:"outlined"})},endAdornment:(0,f.jsx)(l.Z,{sx:{display:n?"":"none"},onClick:O,children:(0,f.jsx)(d.Z,{})}),MenuProps:m,children:v.map(function(e,n){return(0,f.jsx)(o.Z,{value:e,style:{fontWeight:-1===v.indexOf(g)?Z.typography.fontWeightRegular:Z.typography.fontWeightMedium},children:e[x]},n)})}),(0,f.jsx)(p.Z,{sx:{color:"red"},children:b})]})}},5279:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var r=t(7294),i=t(1163),a=t(7029),o=t(5893),s=function(e){var n=e.requiredRole,t=e.children,s=(0,i.useRouter)(),u=(0,a.CG)(function(e){return e.auth.isLoggedIn}),c=(0,a.CG)(function(e){return e.auth.role}),l=(0,a.CG)(function(e){return e.auth.authDone});return(0,r.useEffect)(function(){l&&!u&&s.push(n!==c?"/":"/admin/login")},[l,u,c,n,s]),(0,o.jsx)(o.Fragment,{children:u&&c===n?t:(0,o.jsx)(o.Fragment,{})})},u=function(e,n){var t=function(){return(0,o.jsx)(s,{requiredRole:n,children:(0,o.jsx)(e,{})})};return t.displayName="withProtectedRoute(".concat(e.displayName||e.name||"Component",")"),t}},7010:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return G}});var r=t(7191),i=t(2593),a=t(29),o=t(9499),s=t(7794),u=t.n(s),c=t(7294),l=t(2580),p=t(6886),d=t(5861),f=t(6310),m=t(7029),h=t(8195),g=t(8025),v=t(113),x=t(8987),y=t(190),j=t(4148),b=t(8677),Z=t(1058),O=t(5893);function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function I(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach(function(n){(0,o.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var P=f.Ry({name:f.Z_().required("Name is required"),description:f.Z_(),image:f.nK(),year:f.nK().test("is-year","Select a year",function(e){return!e||"year"in e&&"is_enabled"in e}),instructors:f.IX()}),C={description:"",image:void 0,name:"",year:[],instructors:[]},S=["name","description"],F=function(e){return{}},L=function(e){(0,r.Z)(e);var n,t=(0,m.TL)(),i=[{name:"year",multiple:!1,values:(0,m.CG)(function(e){return e.years.years}),optionLabelKey:"year",optionIdKey:"id"},{name:"instructors",multiple:!0,values:(0,m.CG)(function(e){return e.instructors.allInstructors}),optionLabelKey:"name",optionIdKey:"id"}],o=(0,c.useState)(""),s=o[0],f=o[1],w=(0,c.useState)({severity:"info",open:!1,msg:""}),L=w[0],K=w[1],k=(0,c.useState)(!1),R=k[0],N=k[1];(0,c.useEffect)(function(){var e;return L.open&&(e=setTimeout(function(){K(I(I({},L),{},{open:!1}))},4e3)),function(){return clearTimeout(e)}},[L]);var E=(0,c.useRef)(),T=(n=(0,a.Z)(u().mark(function e(n,r){var i,a;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,f(""),N(!0),!(i=structuredClone(n)).image){e.next=11;break}return e.next=7,(0,h.Z)({title:i.name,collectionName:b.Ul.INSTRUCTORS,imageFile:i.image});case 7:if(null!==(a=e.sent)){e.next=10;break}throw Error("Failed to save image");case 10:i.image=a.url;case 11:t((0,Z.l$)(i)).unwrap().then(function(e){console.log("\uD83D\uDE80 ~ file: InternshipForm.tsx:107 ~ .then ~ data:",e),K({severity:"success",open:!0,msg:"created with id: "+e.id}),r.setSubmitting(!1),r.resetForm({values:C}),E.current&&(E.current.value="")}).catch(function(e){f(e.message),K({severity:"error",open:!1,msg:e.message})}).finally(function(){N(!1)}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.log("\uD83D\uDE80 ~ file: InternshipForm.tsx:131 ~ handleSubmit ~ error:",e.t0),f(e.t0.message);case 18:return e.prev=18,N(!1),e.finish(18);case 21:case"end":return e.stop()}},e,null,[[0,14,18,21]])})),function(e,t){return n.apply(this,arguments)});return(0,O.jsx)(l.J9,{initialValues:C,validationSchema:P,onSubmit:T,validate:F,enableReinitialize:!0,children:function(e){var n=e.errors,t=e.touched,r=e.setFieldValue;return(0,O.jsxs)(l.l0,{children:[S.map(function(e){return(0,O.jsx)(g.Z,{isMultiLine:"description"===e,rowNums:4,item:e,touched:t,errors:n},e)}),(0,O.jsx)(p.ZP,{container:!0,spacing:1,alignItems:"stretch",children:i.map(function(e,r){var i=e.name,a=e.multiple,o=e.values,s=e.optionLabelKey,u=e.optionIdKey;return(0,O.jsx)(p.ZP,{item:!0,xs:6,alignItems:"center",children:(0,O.jsx)(v.Z,{optionLabelKey:s,optionIdKey:u,isMultiLine:a,options:o,item:i,touched:t,errors:n})},r)})}),(0,O.jsx)(j.Z,{onChange:function(e){r("image",e.currentTarget.files[0])},item:"image",touched:t,errors:n}),(0,O.jsx)(x.Z,{fullWidth:!0,variant:"contained",loading:R,loadingIndicator:"Loadingâ€¦",type:"submit",children:"Create Internship"}),s&&(0,O.jsx)(d.Z,{sx:{p:2,color:"red"},variant:"h6",textAlign:"center",children:s}),null!=L&&L.open&&null!=L&&L.msg?(0,O.jsx)(y.Z,{open:L.open,message:L.msg,severity:L.severity}):(0,O.jsx)(O.Fragment,{})]})}})},K=t(8270);function k(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function R(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?k(Object(t),!0).forEach(function(n){(0,o.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var N=f.Ry({name:f.Z_().required("Name is required"),description:f.Z_(),image:f.nK(),year:f.Rx().min(2e3,"year is too early").max(2100,"year is too late"),instructors:f.IX()}),E=["name","description","year"],T=function(e){return{}},_=function(e){var n,t=e.internship,r={description:t.description,image:void 0,name:t.name,year:t.year,instructors:t.instructors};(0,c.useEffect)(function(){function e(){return(e=(0,a.Z)(u().mark(function e(){var n,i,a,o,s;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=(i=(n=t.image).substring(n.lastIndexOf("/")+1)).split(".")[1],o="image/".concat(a),e.next=7,(0,K.Z)(n,i,o);case 7:null!=(s=e.sent)&&s.size&&(r.image=s),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("\uD83D\uDE80 ~ file: InternshipUpdateForm.tsx:68 ~ setImageFromUrl ~ error:",e.t0);case 14:case"end":return e.stop()}},e,null,[[0,11]])}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[t.image]);var i=(0,m.TL)();(0,m.CG)(function(e){return e.years.years});var o=[{name:"instructors",multiple:!0,values:(0,m.CG)(function(e){return e.instructors.allInstructors}),optionLabelKey:"name",optionIdKey:"id"}],s=(0,c.useState)(""),f=s[0],w=s[1],I=(0,c.useState)({severity:"info",open:!1,msg:""}),P=I[0],C=I[1],S=(0,c.useState)(!1),F=S[0],L=S[1];(0,c.useEffect)(function(){var e;return P.open&&(e=setTimeout(function(){C(R(R({},P),{},{open:!1}))},4e3)),function(){return clearTimeout(e)}},[P]);var k=(0,c.useRef)(),_=(n=(0,a.Z)(u().mark(function e(n,a){var o,s;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,w(""),L(!0),!(o=structuredClone(n)).image){e.next=11;break}return e.next=7,(0,h.Z)({title:o.name,collectionName:b.Ul.INSTRUCTORS,imageFile:o.image});case 7:if(null!==(s=e.sent)){e.next=10;break}throw Error("Failed to save image");case 10:o.image=s.url;case 11:o.id=t.id,i((0,Z.yR)(o)).unwrap().then(function(e){console.log("\uD83D\uDE80 ~ file: InternshipUpdateForm.tsx:149 ~ .then ~ data:",e),C({severity:"success",open:!0,msg:"created with id: "+e.id}),a.setSubmitting(!1),a.resetForm({values:r}),k.current&&(k.current.value="")}).catch(function(e){w(e.message),C({severity:"error",open:!1,msg:e.message})}).finally(function(){L(!1)}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.log("\uD83D\uDE80 ~ file: InternshipForm.tsx:131 ~ handleSubmit ~ error:",e.t0),w(e.t0.message);case 19:return e.prev=19,L(!1),e.finish(19);case 22:case"end":return e.stop()}},e,null,[[0,15,19,22]])})),function(e,t){return n.apply(this,arguments)});return(0,O.jsx)(l.J9,{initialValues:r,validationSchema:N,onSubmit:_,validate:T,enableReinitialize:!0,children:function(e){var n=e.errors,r=e.touched,i=e.setFieldValue;return(0,O.jsxs)(l.l0,{children:[E.map(function(e){return(0,O.jsx)(g.Z,{isMultiLine:"description"===e,rowNums:4,item:e,touched:r,errors:n,disabled:"year"===e},e)}),(0,O.jsx)(p.ZP,{container:!0,spacing:1,alignItems:"stretch",children:o.map(function(e,t){var i=e.name,a=e.multiple,o=e.values,s=e.optionLabelKey,u=e.optionIdKey;return(0,O.jsx)(p.ZP,{item:!0,xs:6,alignItems:"center",children:(0,O.jsx)(v.Z,{optionLabelKey:s,optionIdKey:u,isMultiLine:a,options:o,item:i,touched:r,errors:n})},t)})}),(0,O.jsx)(j.Z,{onChange:function(e){i("image",e.currentTarget.files[0])},item:"image",touched:r,errors:n,originalFileSrc:t.image}),(0,O.jsx)(x.Z,{fullWidth:!0,variant:"contained",loading:F,loadingIndicator:"Loadingâ€¦",type:"submit",children:"Update Internship"}),f&&(0,O.jsx)(d.Z,{sx:{p:2,color:"red"},variant:"h6",textAlign:"center",children:f}),null!=P&&P.open&&null!=P&&P.msg?(0,O.jsx)(y.Z,{open:P.open,message:P.msg,severity:P.severity}):(0,O.jsx)(O.Fragment,{})]})}})},D=t(2266),U=t(5279),M=t(3156),W=t(6242),G=(0,U.Z)(function(e){(0,r.Z)(e);var n=(0,m.CG)(function(e){return e.years.selectedYear}),t=(0,m.CG)(function(e){return e.internships.internships}),a=(0,c.useState)(null),o=a[0],s=a[1];return(0,c.useEffect)(function(){if(o){var e=t.find(function(e){return o.id===e.id});null!=e&&e.id&&s(e)}else null!=t&&t[0]&&s(t[0])},[t]),(0,c.useEffect)(function(){console.log("\uD83D\uDE80 ~ file: index.tsx:33 ~ InternshipDashboard ~ selectedInternship:",o)},[o]),(0,O.jsxs)(M.Z,{sx:{display:"flex",flexDirection:"column",gap:"20px"},children:[(0,O.jsx)(i.Z,{}),(0,O.jsxs)(W.Z,{raised:!0,sx:{p:4},children:[(0,O.jsx)(d.Z,{variant:"h4",children:"Add Internship Form"}),(0,O.jsx)(L,{})]}),!(null!=t&&t.length)&&(0,O.jsx)(W.Z,{raised:!0,sx:{p:4},children:(0,O.jsxs)(d.Z,{variant:"h6",children:["There are no internships for ",n]})}),null!=t&&t.length&&o?(0,O.jsxs)(W.Z,{raised:!0,sx:{p:4},children:[(0,O.jsx)(d.Z,{variant:"h4",children:"Edit Internship Form"}),(0,O.jsx)(D.Z,{value:o,handleChange:function(e){return s(e.target.value)},multiple:!1,name:"",options:t,optionLabelKey:"name",optionIdKey:"id"}),(0,O.jsx)(_,{internship:o})]}):(0,O.jsx)(O.Fragment,{})]})},"Admin")},8195:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var r=t(29),i=t(7794),a=t.n(i),o=t(2610),s=t(3143);function u(e){return c.apply(this,arguments)}function c(){return(c=(0,r.Z)(a().mark(function e(n){var t,r,i,u,c,l;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.title,r=n.collectionName,i=n.imageFile,u=n.studentUsername,c=n.studentProject,l=n.originalFilename,e.prev=1,!u){e.next=7;break}return l&&(i.imageUrlUpdate=l),e.next=6,s.Z.updateStudentImage({title:u,collection:r,file:i,studentUsername:u,studentProject:c});case 6:case 9:return e.abrupt("return",e.sent);case 7:return e.next=9,o.Z.createImage(t,r,i);case 12:return e.prev=12,e.t0=e.catch(1),console.log("\uD83D\uDE80 ~ file: ProjectForm.tsx:136 ~ handleSubmit ~ error:",e.t0),e.abrupt("return",null);case 16:case"end":return e.stop()}},e,null,[[1,12]])}))).apply(this,arguments)}},8270:function(e,n,t){"use strict";function r(e,n,t){return fetch(e).then(function(e){return e.arrayBuffer()}).then(function(e){return new File([e],n,{type:t})})}t.d(n,{Z:function(){return r}})},8214:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/internships",function(){return t(7010)}])}},function(e){e.O(0,[135,929,471,886,860,774,888,179],function(){return e(e.s=8214)}),_N_E=e.O()}]);