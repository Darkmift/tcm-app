(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[310],{6242:function(e,t,r){"use strict";r.d(t,{Z:function(){return y}});var n=r(7462),i=r(3366),a=r(7294),o=r(6010),s=r(4780),u=r(948),c=r(1657),l=r(629),d=r(1588),f=r(4867);function p(e){return(0,f.Z)("MuiCard",e)}(0,d.Z)("MuiCard",["root"]);var m=r(5893);let h=["className","raised"],g=e=>{let{classes:t}=e;return(0,s.Z)({root:["root"]},p,t)},v=(0,u.ZP)(l.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),x=a.forwardRef(function(e,t){let r=(0,c.Z)({props:e,name:"MuiCard"}),{className:a,raised:s=!1}=r,u=(0,i.Z)(r,h),l=(0,n.Z)({},r,{raised:s}),d=g(l);return(0,m.jsx)(v,(0,n.Z)({className:(0,o.Z)(d.root,a),elevation:s?8:void 0,ref:t,ownerState:l},u))});var y=x},2593:function(e,t,r){"use strict";var n=r(7191),i=r(3321),a=r(5861);r(7294);var o=r(1163),s=r(1023),u=r(5893);t.Z=function(e){(0,n.Z)(e);var t=(0,o.useRouter)();return(0,u.jsxs)(i.Z,{onClick:function(){return t.back()},sx:{display:"flex",maxWidth:"175px",alignItems:"center"},variant:"outlined",children:[(0,u.jsx)(s.Z,{}),(0,u.jsx)(a.Z,{sx:{mt:"3px",mx:2},children:"Go Back"})]})}},4148:function(e,t,r){"use strict";var n=r(4054),i=r(6886),a=r(135),o=r(2580),s=r(7294),u=r(5675),c=r.n(u),l=r(8677),d=r(5893);t.Z=function(e){var t=e.onChange,r=e.item,u=e.touched,f=e.errors,p=e.originalFileSrc,m=l.LT+"/projects/default-project-img.jpg",h=(0,s.useState)(p),g=h[0],v=h[1];(0,s.useEffect)(function(){v(p)},[p]);var x=function(e){var n=e.target.files;if(n&&n.length>0){var i=n[0];v(URL.createObjectURL(i)),t({currentTarget:{name:r,files:[i],value:i}})}};return(0,d.jsx)(o.gN,{name:r,children:function(e){var t=e.field;return(0,d.jsx)(n.Z,{fullWidth:!0,margin:"normal",error:u[r]&&!!f[r],children:(0,d.jsxs)(i.ZP,{container:!0,spacing:2,children:[(0,d.jsx)(i.ZP,{item:!0,xs:2,children:(0,d.jsx)(c(),{width:175,height:175,src:g||m,alt:r})}),(0,d.jsx)(i.ZP,{item:!0,xs:10,children:(0,d.jsx)(a.Z,{sx:{py:1},fullWidth:!0,variant:"standard",id:r,name:t.name,onChange:x,label:t.name.toUpperCase(),type:"file",InputLabelProps:{shrink:"image"===r},error:u[r]&&!!f[r],helperText:u[r]&&f[r]})})]})})}})}},8025:function(e,t,r){"use strict";var n=r(9499),i=r(4054),a=r(135),o=r(2580);r(7294);var s=r(5893);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}t.Z=function(e){var t=e.disabled,r=e.isMultiLine,c=e.rowNums,l=e.item,d=e.touched,f=e.errors;return(0,s.jsx)(o.gN,{name:l,children:function(e){var o=e.field;return(0,s.jsx)(i.Z,{fullWidth:!0,margin:"normal",error:d[l]&&!!f[l],children:(0,s.jsx)(a.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({disabled:t,sx:{py:1},fullWidth:!0,variant:"description"===o.name?"outlined":"standard",id:l,name:o.name,value:o.value,onChange:o.onChange,label:o.name.toUpperCase(),type:"text",error:d[l]&&!!f[l],helperText:d[l]&&f[l]},r?{multiline:!0,rows:c}:{}),l)})}},l)}},113:function(e,t,r){"use strict";var n=r(4054),i=r(2580);r(7294);var a=r(2266),o=r(5893);t.Z=function(e){var t=e.optionLabelKey,r=e.optionIdKey,s=e.isMultiLine,u=e.options,c=e.item,l=e.touched,d=e.errors;return(0,o.jsx)(i.gN,{name:c,children:function(e){var i=e.field;return(0,o.jsx)(n.Z,{fullWidth:!0,margin:"normal",error:l[c]&&!!d[c],children:(0,o.jsx)(a.Z,{multiple:!!s,value:i.value,handleChange:i.onChange,name:i.name,options:u,optionLabelKey:t,optionIdKey:r,error:l[c]&&!!d[c],helperText:l[c]&&d[c]})})}},c)}},190:function(e,t,r){"use strict";r(7294);var n=r(8703),i=r(1737),a=r(5893);t.Z=function(e){var t=e.severity,r=e.open,o=e.message,s=e.handleClose;return(0,a.jsx)(n.Z,{open:r,autoHideDuration:4e3,onClose:s,children:(0,a.jsx)(i.Z,{onClose:s,severity:t,sx:{width:"100%",fontSize:"25px",fontWeight:"900"},children:o})})}},2266:function(e,t,r){"use strict";r(7294);var n=r(2734),i=r(7058),a=r(3841),o=r(3599),s=r(4054),u=r(315),c=r(7918),l=r(3946),d=r(6815),f=r(3343),p=r(5893),m={PaperProps:{style:{maxHeight:224,width:250}}};t.Z=function(e){var t=e.value,r=e.handleChange,h=e.multiple,g=e.name,v=e.options,x=e.optionLabelKey,y=e.optionIdKey,j=e.error,b=e.helperText,Z=(0,n.Z)(),O=function(e){e.target.value||(e.target.value=h?[]:null),e.target.name=g,r(e)};return!!v&&(0,p.jsxs)(s.Z,{sx:{width:"100%"},error:j,children:[(0,p.jsx)(a.Z,{id:"demo-multiple-chip-label",children:g}),(0,p.jsx)(u.Z,{name:g,sx:{minHeight:"70px"},labelId:"demo-multiple-chip-label",id:"demo-multiple-chip",multiple:h,variant:"standard",value:t,onChange:O,input:(0,p.jsx)(i.Z,{id:"select-multiple-chip",label:"Chip"}),renderValue:function(e){if(h)return e.map(function(e,t){var r=v.find(function(t){return t[y]===e[y]});return(0,p.jsx)(c.Z,{label:r[x]},t)});if(null!=e&&null!==(t=e[0])&&void 0!==t&&t[y])return(0,p.jsx)(c.Z,{label:e[0][x],variant:"outlined"});var t,r=v.find(function(t){return t[y]===e[y]});return(0,p.jsx)(c.Z,{label:null==r?void 0:r[x],variant:"outlined"})},endAdornment:(0,p.jsx)(l.Z,{sx:{display:t?"":"none"},onClick:O,children:(0,p.jsx)(f.Z,{})}),MenuProps:m,children:v.map(function(e,t){return(0,p.jsx)(o.Z,{value:e,style:{fontWeight:-1===v.indexOf(g)?Z.typography.fontWeightRegular:Z.typography.fontWeightMedium},children:e[x]},t)})}),(0,p.jsx)(d.Z,{sx:{color:"red"},children:b})]})}},5279:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var n=r(7294),i=r(1163),a=r(7029),o=r(5893),s=function(e){var t=e.requiredRole,r=e.children,s=(0,i.useRouter)(),u=(0,a.CG)(function(e){return e.auth.isLoggedIn}),c=(0,a.CG)(function(e){return e.auth.role}),l=(0,a.CG)(function(e){return e.auth.authDone});return(0,n.useEffect)(function(){l&&!u&&s.push(t!==c?"/":"/admin/login")},[l,u,c,t,s]),(0,o.jsx)(o.Fragment,{children:u&&c===t?r:(0,o.jsx)(o.Fragment,{})})},u=function(e,t){var r=function(){return(0,o.jsx)(s,{requiredRole:t,children:(0,o.jsx)(e,{})})};return r.displayName="withProtectedRoute(".concat(e.displayName||e.name||"Component",")"),r}},1044:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return W}});var n=r(7191),i=r(2593),a=r(3156),o=r(6242),s=r(5861),u=r(7294),c=r(29),l=r(9499),d=r(7794),f=r.n(d),p=r(2580),m=r(6886),h=r(6310),g=r(7029),v=r(8195),x=r(8025),y=r(113),j=r(8987),b=r(190),Z=r(4148),O=r(3354),w=r(8677),P=r(5893);function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach(function(t){(0,l.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var I=h.Ry({name:h.Z_().required("Name is required"),description:h.Z_(),image:h.nK(),year:h.nK().test("is-year","Select a year",function(e){return!e||"year"in e&&"is_enabled"in e})}),F={description:"",image:void 0,name:"",year:[]},k=["name","description"],R=function(e){return{}},N=function(e){(0,n.Z)(e);var t,r=(0,g.TL)(),i=[{name:"year",multiple:!1,values:(0,g.CG)(function(e){return e.years.years}),optionLabelKey:"year",optionIdKey:"id"}],a=(0,u.useState)(""),o=a[0],l=a[1],d=(0,u.useState)({severity:"info",open:!1,msg:""}),h=d[0],C=d[1],N=(0,u.useState)(!1),E=N[0],L=N[1];(0,u.useEffect)(function(){var e;return h.open&&(e=setTimeout(function(){C(S(S({},h),{},{open:!1}))},4e3)),function(){return clearTimeout(e)}},[h]);var T=(0,u.useRef)(),_=(t=(0,c.Z)(f().mark(function e(t,n){var i,a;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l(""),L(!0),!(i=structuredClone(t)).image){e.next=11;break}return e.next=7,(0,v.Z)({title:i.name,collectionName:w.Ul.INSTRUCTORS,imageFile:i.image});case 7:if(null!==(a=e.sent)){e.next=10;break}throw Error("Failed to save image");case 10:i.image=a.url;case 11:r((0,O.MR)(i)).unwrap().then(function(e){console.log("\uD83D\uDE80 ~ file: InstructorForm.tsx:101 ~ .then ~ data:",e),C({severity:"success",open:!0,msg:"created with id: "+e.id}),n.setSubmitting(!1),n.resetForm({values:F}),T.current&&(T.current.value="")}).catch(function(e){l(e.message),C({severity:"error",open:!1,msg:e.message})}).finally(function(){L(!1)}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.log("\uD83D\uDE80 ~ file: InstructorForm.tsx:125 ~ handleSubmit ~ error:",e.t0),l(e.t0.message);case 18:return e.prev=18,L(!1),e.finish(18);case 21:case"end":return e.stop()}},e,null,[[0,14,18,21]])})),function(e,r){return t.apply(this,arguments)});return(0,P.jsx)(p.J9,{initialValues:F,validationSchema:I,onSubmit:_,validate:R,enableReinitialize:!0,children:function(e){var t=e.errors,r=e.touched,n=e.setFieldValue;return(0,P.jsxs)(p.l0,{children:[k.map(function(e){return(0,P.jsx)(x.Z,{isMultiLine:"description"===e,rowNums:4,item:e,touched:r,errors:t},e)}),(0,P.jsx)(m.ZP,{container:!0,spacing:1,alignItems:"stretch",children:i.map(function(e,n){var i=e.name,a=e.multiple,o=e.values,s=e.optionLabelKey,u=e.optionIdKey;return(0,P.jsx)(m.ZP,{item:!0,xs:6,alignItems:"center",children:(0,P.jsx)(y.Z,{optionLabelKey:s,optionIdKey:u,isMultiLine:a,options:o,item:i,touched:r,errors:t})},n)})}),(0,P.jsx)(Z.Z,{onChange:function(e){n("image",e.currentTarget.files[0])},item:"image",touched:r,errors:t}),(0,P.jsx)(j.Z,{fullWidth:!0,variant:"contained",loading:E,loadingIndicator:"Loading…",type:"submit",children:"Create Instructor"}),o&&(0,P.jsx)(s.Z,{sx:{p:2,color:"red"},variant:"h6",textAlign:"center",children:o}),null!=h&&h.open&&null!=h&&h.msg?(0,P.jsx)(b.Z,{open:h.open,message:h.msg,severity:h.severity}):(0,P.jsx)(P.Fragment,{})]})}})},E=r(2266),L=r(8270);function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach(function(t){(0,l.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var K=h.Ry({name:h.Z_().required("Name is required"),description:h.Z_(),image:h.nK(),year:h.Rx().min(2e3,"year is too early").max(2100,"year is too late")}),U=["name","description","year"],D=function(e){return{}},M=function(e){var t,r=e.instructor,n={description:r.description,image:null,name:r.name,year:r.year},i=(0,g.TL)();(0,g.CG)(function(e){return e.years.years});var a=(0,u.useState)(""),o=a[0],l=a[1],d=(0,u.useState)({severity:"info",open:!1,msg:""}),m=d[0],h=d[1],y=(0,u.useState)(!1),C=y[0],S=y[1];(0,u.useEffect)(function(){var e;return m.open&&(e=setTimeout(function(){h(_(_({},m),{},{open:!1}))},4e3)),function(){return clearTimeout(e)}},[m]);var I=(0,u.useRef)();(0,u.useEffect)(function(){function e(){return(e=(0,c.Z)(f().mark(function e(){var t,i,a,o,s;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=(i=(t=r.image).substring(t.lastIndexOf("/")+1)).split(".")[1],o="image/".concat(a),e.next=7,(0,L.Z)(t,i,o);case 7:null!=(s=e.sent)&&s.size&&(n.image=s),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("\uD83D\uDE80 ~ file: ProjectUpdateForm.tsx:101 ~ setImageFromUrl ~ error:",e.t0);case 14:case"end":return e.stop()}},e,null,[[0,11]])}))).apply(this,arguments)}console.log("\uD83D\uDE80 ~ file: InstructorUpdateForm.tsx:115 ~ useEffect ~     instructor.image:",r.image),function(){e.apply(this,arguments)}()},[r.image]);var F=(t=(0,c.Z)(f().mark(function e(t,a){var o,s,u;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l(""),S(!0),!(null!==(o=(s=structuredClone(t)).image)&&void 0!==o&&o.size)){e.next=11;break}return e.next=7,(0,v.Z)({title:s.name,collectionName:w.Ul.INSTRUCTORS,imageFile:s.image});case 7:if(null!==(u=e.sent)){e.next=10;break}throw Error("Failed to save image");case 10:s.image=u.url;case 11:s.id=r.id,i((0,O._u)(s)).unwrap().then(function(e){console.log("\uD83D\uDE80 ~ file: InstructorForm.tsx:101 ~ .then ~ data:",e),h({severity:"success",open:!0,msg:"created with id: "+e.id}),a.setSubmitting(!1),a.resetForm({values:n}),I.current&&(I.current.value="")}).catch(function(e){l(e.message),h({severity:"error",open:!1,msg:e.message})}).finally(function(){S(!1)}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.log("\uD83D\uDE80 ~ file: InstructorForm.tsx:125 ~ handleSubmit ~ error:",e.t0),l(e.t0.message);case 19:return e.prev=19,S(!1),e.finish(19);case 22:case"end":return e.stop()}},e,null,[[0,15,19,22]])})),function(e,r){return t.apply(this,arguments)});return(0,P.jsx)(p.J9,{initialValues:n,validationSchema:K,onSubmit:F,validate:D,enableReinitialize:!0,children:function(e){var t=e.errors,n=e.touched,i=e.setFieldValue;return(0,P.jsxs)(p.l0,{children:[U.map(function(e){return(0,P.jsx)(x.Z,{isMultiLine:"description"===e,rowNums:4,item:e,touched:n,errors:t,disabled:"year"===e},e)}),(0,P.jsx)(Z.Z,{onChange:function(e){i("image",e.currentTarget.files[0])},item:"image",touched:n,errors:t,originalFileSrc:r.image}),(0,P.jsx)(j.Z,{fullWidth:!0,variant:"contained",loading:C,loadingIndicator:"Loading…",type:"submit",children:"Update Instructor"}),o&&(0,P.jsx)(s.Z,{sx:{p:2,color:"red"},variant:"h6",textAlign:"center",children:o}),null!=m&&m.open&&null!=m&&m.msg?(0,P.jsx)(b.Z,{open:m.open,message:m.msg,severity:m.severity}):(0,P.jsx)(P.Fragment,{})]})}})},W=(0,r(5279).Z)(function(e){(0,n.Z)(e);var t=(0,g.CG)(function(e){return e.years.selectedYear}),r=(0,g.CG)(function(e){return e.instructors.allInstructors}),c=(0,u.useState)(null),l=c[0],d=c[1];return(0,u.useEffect)(function(){!l&&null!=r&&r[0]&&d(r[0])},[r]),(0,P.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"column",gap:"20px"},children:[(0,P.jsx)(i.Z,{}),(0,P.jsxs)(o.Z,{raised:!0,sx:{p:4},children:[(0,P.jsx)(s.Z,{variant:"h4",children:"Add Instructor Form"}),(0,P.jsx)(N,{})]}),!(null!=r&&r.length)&&(0,P.jsx)(o.Z,{raised:!0,sx:{p:4},children:(0,P.jsxs)(s.Z,{variant:"h6",children:["There are no instructors for ",t]})}),null!=r&&r.length&&l?(0,P.jsxs)(o.Z,{raised:!0,sx:{p:4},children:[(0,P.jsx)(s.Z,{variant:"h4",children:"Edit Instructor Form"}),(0,P.jsx)(E.Z,{value:l,handleChange:function(e){return d(e.target.value)},multiple:!1,name:"",options:r,optionLabelKey:"name",optionIdKey:"id"}),(0,P.jsx)(M,{instructor:l})]}):(0,P.jsx)(P.Fragment,{})]})},"Admin")},8195:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var n=r(29),i=r(7794),a=r.n(i),o=r(2610),s=r(3143);function u(e){return c.apply(this,arguments)}function c(){return(c=(0,n.Z)(a().mark(function e(t){var r,n,i,u,c,l;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.title,n=t.collectionName,i=t.imageFile,u=t.studentUsername,c=t.studentProject,l=t.originalFilename,e.prev=1,!u){e.next=7;break}return l&&(i.imageUrlUpdate=l),e.next=6,s.Z.updateStudentImage({title:u,collection:n,file:i,studentUsername:u,studentProject:c});case 6:case 9:return e.abrupt("return",e.sent);case 7:return e.next=9,o.Z.createImage(r,n,i);case 12:return e.prev=12,e.t0=e.catch(1),console.log("\uD83D\uDE80 ~ file: ProjectForm.tsx:136 ~ handleSubmit ~ error:",e.t0),e.abrupt("return",null);case 16:case"end":return e.stop()}},e,null,[[1,12]])}))).apply(this,arguments)}},8270:function(e,t,r){"use strict";function n(e,t,r){return fetch(e).then(function(e){return e.arrayBuffer()}).then(function(e){return new File([e],t,{type:r})})}r.d(t,{Z:function(){return n}})},542:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/instructors",function(){return r(1044)}])}},function(e){e.O(0,[135,929,471,886,860,774,888,179],function(){return e(e.s=542)}),_N_E=e.O()}]);