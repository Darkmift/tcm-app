(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[34],{6242:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(7462),i=n(3366),o=n(7294),a=n(6010),s=n(4780),c=n(948),l=n(1657),u=n(629),d=n(1588),p=n(4867);function f(e){return(0,p.Z)("MuiCard",e)}(0,d.Z)("MuiCard",["root"]);var j=n(5893);let h=["className","raised"],m=e=>{let{classes:t}=e;return(0,s.Z)({root:["root"]},f,t)},g=(0,c.ZP)(u.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),y=o.forwardRef(function(e,t){let n=(0,l.Z)({props:e,name:"MuiCard"}),{className:o,raised:s=!1}=n,c=(0,i.Z)(n,h),u=(0,r.Z)({},n,{raised:s}),d=m(u);return(0,j.jsx)(g,(0,r.Z)({className:(0,a.Z)(d.root,o),elevation:s?8:void 0,ref:t,ownerState:u},c))});var v=y},2593:function(e,t,n){"use strict";var r=n(7191),i=n(3321),o=n(5861);n(7294);var a=n(1163),s=n(1023),c=n(5893);t.Z=function(e){(0,r.Z)(e);var t=(0,a.useRouter)();return(0,c.jsxs)(i.Z,{onClick:function(){return t.back()},sx:{display:"flex",maxWidth:"175px",alignItems:"center"},variant:"outlined",children:[(0,c.jsx)(s.Z,{}),(0,c.jsx)(o.Z,{sx:{mt:"3px",mx:2},children:"Go Back"})]})}},8025:function(e,t,n){"use strict";var r=n(9499),i=n(4054),o=n(135),a=n(2580);n(7294);var s=n(5893);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}t.Z=function(e){var t=e.disabled,n=e.isMultiLine,l=e.rowNums,u=e.item,d=e.touched,p=e.errors;return(0,s.jsx)(a.gN,{name:u,children:function(e){var a=e.field;return(0,s.jsx)(i.Z,{fullWidth:!0,margin:"normal",error:d[u]&&!!p[u],children:(0,s.jsx)(o.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({disabled:t,sx:{py:1},fullWidth:!0,variant:"description"===a.name?"outlined":"standard",id:u,name:a.name,value:a.value,onChange:a.onChange,label:a.name.toUpperCase(),type:"text",error:d[u]&&!!p[u],helperText:d[u]&&p[u]},n?{multiline:!0,rows:l}:{}),u)})}},u)}},113:function(e,t,n){"use strict";var r=n(4054),i=n(2580);n(7294);var o=n(2266),a=n(5893);t.Z=function(e){var t=e.optionLabelKey,n=e.optionIdKey,s=e.isMultiLine,c=e.options,l=e.item,u=e.touched,d=e.errors;return(0,a.jsx)(i.gN,{name:l,children:function(e){var i=e.field;return(0,a.jsx)(r.Z,{fullWidth:!0,margin:"normal",error:u[l]&&!!d[l],children:(0,a.jsx)(o.Z,{multiple:!!s,value:i.value,handleChange:i.onChange,name:i.name,options:c,optionLabelKey:t,optionIdKey:n,error:u[l]&&!!d[l],helperText:u[l]&&d[l]})})}},l)}},190:function(e,t,n){"use strict";n(7294);var r=n(8703),i=n(1737),o=n(5893);t.Z=function(e){var t=e.severity,n=e.open,a=e.message,s=e.handleClose;return(0,o.jsx)(r.Z,{open:n,autoHideDuration:4e3,onClose:s,children:(0,o.jsx)(i.Z,{onClose:s,severity:t,sx:{width:"100%",fontSize:"25px",fontWeight:"900"},children:a})})}},2266:function(e,t,n){"use strict";n(7294);var r=n(2734),i=n(7058),o=n(3841),a=n(3599),s=n(4054),c=n(315),l=n(7918),u=n(3946),d=n(6815),p=n(3343),f=n(5893),j={PaperProps:{style:{maxHeight:224,width:250}}};t.Z=function(e){var t=e.value,n=e.handleChange,h=e.multiple,m=e.name,g=e.options,y=e.optionLabelKey,v=e.optionIdKey,x=e.error,Z=e.helperText,b=(0,r.Z)(),O=function(e){e.target.value||(e.target.value=h?[]:null),e.target.name=m,n(e)};return!!g&&(0,f.jsxs)(s.Z,{sx:{width:"100%"},error:x,children:[(0,f.jsx)(o.Z,{id:"demo-multiple-chip-label",children:m}),(0,f.jsx)(c.Z,{name:m,sx:{minHeight:"70px"},labelId:"demo-multiple-chip-label",id:"demo-multiple-chip",multiple:h,variant:"standard",value:t,onChange:O,input:(0,f.jsx)(i.Z,{id:"select-multiple-chip",label:"Chip"}),renderValue:function(e){if(h)return e.map(function(e,t){var n=g.find(function(t){return t[v]===e[v]});return(0,f.jsx)(l.Z,{label:n[y]},t)});if(null!=e&&null!==(t=e[0])&&void 0!==t&&t[v])return(0,f.jsx)(l.Z,{label:e[0][y],variant:"outlined"});var t,n=g.find(function(t){return t[v]===e[v]});return(0,f.jsx)(l.Z,{label:null==n?void 0:n[y],variant:"outlined"})},endAdornment:(0,f.jsx)(u.Z,{sx:{display:t?"":"none"},onClick:O,children:(0,f.jsx)(p.Z,{})}),MenuProps:j,children:g.map(function(e,t){return(0,f.jsx)(a.Z,{value:e,style:{fontWeight:-1===g.indexOf(m)?b.typography.fontWeightRegular:b.typography.fontWeightMedium},children:e[y]},t)})}),(0,f.jsx)(d.Z,{sx:{color:"red"},children:Z})]})}},7491:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return F}});var r=n(7191),i=n(2266),o=n(29),a=n(9499),s=n(7794),c=n.n(s),l=n(7294),u=n(2580),d=n(6886),p=n(7357),f=n(5861),j=n(6310),h=n(7029),m=n(4457),g=n(8025),y=n(113),v=n(8987),x=n(190),Z=n(2610),b=n(5893);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var w=j.Ry({title:j.Z_().required("Title is required"),year:j.Z_().required("Year is required"),project:j.nK().test("is-project","Select an project",function(e){return console.log("\uD83D\uDE80 ~ file: WinningProjectForm.tsx:19 ~ project:Yup.mixed ~ value:",e),!1===(0,m.Z)(e)||!e||"id"in e&&"name"in e})}),S=["year","title"],C=function(e){return{}},K=function(e){(0,r.Z)(e),(0,h.TL)();var t,n=(0,h.CG)(function(e){return e.years.selectedYear}),i=(0,h.CG)(function(e){return e.projects.projects}),a=(0,l.useState)(""),s=a[0],j=a[1],m=(0,l.useState)({severity:"info",open:!1,msg:""}),O=m[0],K=m[1],I=(0,l.useState)(!1),W=I[0],L=I[1],E=(0,l.useState)({project:null,title:"",year:""}),_=E[0],D=E[1];(0,l.useEffect)(function(){D(P(P({},_),{},{year:""+n}))},[n]);var T=[{name:"project",multiple:!1,values:i,optionLabelKey:"name",optionIdKey:"id"}];(0,l.useEffect)(function(){var e;return O.open&&(e=setTimeout(function(){K(P(P({},O),{},{open:!1}))},4e3)),function(){return clearTimeout(e)}},[O]);var k=(0,l.useRef)(),N=(t=(0,o.Z)(c().mark(function e(t,n){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{j(""),L(!0),Z.Z.addWinnerProject({title:t.title,year:t.year,projectId:t.project.id}).then(function(e){console.log("\uD83D\uDE80 ~ file: ProjectForm.tsx:144 ~ .then ~ data:",e),K({severity:"success",open:!0,msg:"created with id: "+(null==e?void 0:e.id)}),n.setSubmitting(!1),n.resetForm({values:_}),k.current&&(k.current.value="")}).catch(function(e){j(e.message),K({severity:"error",open:!1,msg:e.message})}).finally(function(){L(!1)})}catch(e){console.log("\uD83D\uDE80 ~ file: ProjectForm.tsx:167 ~ handleSubmit ~ error:",e),j(e.message)}finally{L(!1)}case 1:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)});return(0,b.jsx)(u.J9,{initialValues:_,validationSchema:w,onSubmit:N,validate:C,enableReinitialize:!0,children:function(e){var t=e.errors,n=e.touched,r=(e.setFieldValue,e.values);return(0,b.jsxs)(u.l0,{children:[S.map(function(e){return(0,b.jsx)(g.Z,{isMultiLine:!1,rowNums:4,item:e,touched:n,errors:t},e)}),(0,b.jsx)(d.ZP,{container:!0,spacing:1,alignItems:"stretch",children:null!=i&&i.length?T.map(function(e,r){var i=e.name,o=e.values,a=e.optionLabelKey,s=e.optionIdKey;return(0,b.jsx)(d.ZP,{item:!0,xs:6,alignItems:"center",children:(0,b.jsx)(y.Z,{optionLabelKey:a,optionIdKey:s,isMultiLine:!1,options:o,item:i,touched:n,errors:t})},r)}):(0,b.jsx)(p.Z,{sx:{padding:5},children:(0,b.jsx)(f.Z,{children:r.year?"There are no projects for ".concat(r.year):"Please select a year"})})}),(0,b.jsx)(v.Z,{fullWidth:!0,variant:"contained",loading:W,loadingIndicator:"Loading…",type:"submit",children:"Create Winning Project"}),s&&(0,b.jsx)(f.Z,{sx:{p:2,color:"red"},variant:"h6",textAlign:"center",children:s}),null!=O&&O.open&&null!=O&&O.msg?(0,b.jsx)(x.Z,{open:O.open,message:O.msg,severity:O.severity}):(0,b.jsx)(b.Fragment,{})]})}})};function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var L=j.Ry({title:j.Z_().required("Title is required"),year:j.Z_().required("Year is required"),project:j.nK().test("is-project","Select an project",function(e){return console.log("\uD83D\uDE80 ~ file: WinningProjectForm.tsx:19 ~ project:Yup.mixed ~ value:",e),!1===(0,m.Z)(e)||!e||"id"in e&&"name"in e})}),E=["year","title"],_=function(e){return{}},D=function(e){var t,n=e.winningProject,r=e.triggerUpdate,i=(0,h.CG)(function(e){return e.years.selectedYear}),a=(0,h.CG)(function(e){return e.projects.projects}),s=(0,l.useState)(""),j=s[0],m=s[1],O=(0,l.useState)({severity:"info",open:!1,msg:""}),P=O[0],w=O[1],S=(0,l.useState)(!1),C=S[0],K=S[1],I=(0,l.useState)({project:null,title:"",year:""}),D=I[0],T=I[1];(0,l.useEffect)(function(){T(W(W({},D),{},{project:n.expand.projectId,title:n.title,year:n.year}))},[n]);var k=[{name:"project",multiple:!1,values:a,optionLabelKey:"name",optionIdKey:"id"}];(0,l.useEffect)(function(){var e;return P.open&&(e=setTimeout(function(){w(W(W({},P),{},{open:!1}))},4e3)),function(){return clearTimeout(e)}},[P]);var N=(t=(0,o.Z)(c().mark(function e(t,i){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{m(""),K(!0),Z.Z.updateWinnerProject(W(W({},n),{},{title:t.title,year:t.year,projectId:t.project.id})).then(function(e){w({severity:"success",open:!0,msg:"updated with id: "+(null==e?void 0:e.id)}),i.setSubmitting(!1),i.resetForm({values:D}),r&&r()}).catch(function(e){m(e.message),w({severity:"error",open:!1,msg:e.message})}).finally(function(){K(!1)})}catch(e){console.log("\uD83D\uDE80 ~ file: ProjectForm.tsx:167 ~ handleSubmit ~ error:",e),m(e.message)}finally{K(!1)}case 1:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)});return(0,b.jsx)(u.J9,{initialValues:D,validationSchema:L,onSubmit:N,validate:_,enableReinitialize:!0,children:function(e){var t=e.errors,n=e.touched,r=(e.setFieldValue,e.values);return(0,b.jsxs)(u.l0,{children:[E.map(function(e){return(0,b.jsx)(g.Z,{isMultiLine:!1,rowNums:4,item:e,touched:n,errors:t},e)}),(0,b.jsx)(d.ZP,{container:!0,spacing:1,alignItems:"stretch",children:null!=a&&a.length?k.map(function(e,r){var i=e.name,o=e.values,a=e.optionLabelKey,s=e.optionIdKey;return(0,b.jsx)(d.ZP,{item:!0,xs:6,alignItems:"center",children:(0,b.jsx)(y.Z,{optionLabelKey:a,optionIdKey:s,isMultiLine:!1,options:o,item:i,touched:n,errors:t})},r)}):(0,b.jsx)(p.Z,{sx:{padding:5},children:(0,b.jsx)(f.Z,{children:r.year?"There are no projects for ".concat(i):"Please select a year"})})}),(0,b.jsx)(v.Z,{fullWidth:!0,variant:"contained",loading:C,loadingIndicator:"Loading…",type:"submit",children:"Update Winning Project"}),j&&(0,b.jsx)(f.Z,{sx:{p:2,color:"red"},variant:"h6",textAlign:"center",children:j}),null!=P&&P.open&&null!=P&&P.msg?(0,b.jsx)(x.Z,{open:P.open,message:P.msg,severity:P.severity}):(0,b.jsx)(b.Fragment,{})]})}})},T=n(2593),k=n(3156),N=n(6242),F=function(e){(0,r.Z)(e);var t=(0,h.CG)(function(e){return e.years.selectedYear}),n=(0,l.useState)([]),o=n[0],a=n[1],s=(0,l.useState)(),c=s[0],u=s[1],d=(0,l.useState)(!1),p=d[0],j=d[1];return(0,l.useEffect)(function(){Z.Z.getAllWinnerProjects().then(function(e){console.log("\uD83D\uDE80 ~ file: index.tsx:21 ~ .then ~ winnerProjects:",e),a(e.filter(function(e){return e.year===""+t})),e.length&&u(e[0])}).catch(function(e){console.log("\uD83D\uDE80 ~ file: winningProjects.tsx:18 ~ useEffect ~ error:",e),a([])})},[t,p]),(0,b.jsxs)(k.Z,{sx:{display:"flex",flexDirection:"column",gap:"20px"},children:[(0,b.jsx)(T.Z,{}),(0,b.jsxs)(N.Z,{raised:!0,sx:{p:4},children:[(0,b.jsx)(f.Z,{variant:"h4",children:"Add Winning Project"}),(0,b.jsx)(K,{})]}),(0,b.jsxs)(N.Z,{raised:!0,sx:{p:4},children:[(0,b.jsx)(f.Z,{variant:"h6",children:"Select Winning Prjoect"}),null!=o&&o.length?(0,b.jsx)(i.Z,{value:c||void 0,handleChange:function(e){return u(e.target.value)},multiple:!1,name:"",options:o,optionLabelKey:"title",optionIdKey:"id"}):(0,b.jsxs)(f.Z,{variant:"h4",children:["No projects for ",t]}),c&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.Z,{variant:"h4",children:"Update Winning Project"}),(0,b.jsx)(D,{triggerUpdate:function(){return j(function(e){return!e})},winningProject:c})]})]})]})}},4457:function(e,t,n){"use strict";function r(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)}n.d(t,{Z:function(){return r}})},4798:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/winning-projects",function(){return n(7491)}])}},function(e){e.O(0,[135,929,471,886,860,774,888,179],function(){return e(e.s=4798)}),_N_E=e.O()}]);